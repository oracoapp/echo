class OracoEcho{constructor(e){this.form=document.getElementById(e),this.initialize(),this.echoAll()}initialize(){this.form.addEventListener("input",this.echo.bind(this))}getValue(e){switch(e.type){case"text":case"password":case"email":case"url":case"tel":case"search":case"number":case"range":case"color":case"date":case"datetime-local":case"month":case"week":case"time":case"select-one":case"radio":case"textarea":return e.value;case"checkbox":return!!e.checked;case"select-multiple":const t=[];for(const a of e.options)a.selected&&t.push(a.value);return t.join(", ");default:return""}}echoElement(e){const t=this.getValue(e),a=document.getElementById(e.getAttribute("data-echo-target"));if(e.hasAttribute("data-echo-wrapper-template")){let r=document.getElementById(e.getAttribute("data-echo-wrapper-template")).content.cloneNode(!0);r=r.firstElementChild.outerHTML,r=r.replace(/{{value}}/g,t),a.innerHTML=r}else e.hasAttribute("data-echo-wrapper")?(wrapper=e.getAttribute("data-echo-wrapper"),a.innerHTML=wrapper?wrapper.replace("{{value}}",t):t):a.innerHTML=t}echo(e){const t=e.target;this.validate(t)&&this.echoElement(t)}echoAll(){this.form.querySelectorAll("input[data-echo-target], select[data-echo-target], textarea[data-echo-target]").forEach((e=>{this.validate(e,!0)&&this.echoElement(e)}))}validate(e,t=!1){if(t){if(e.hasAttribute("data-echo-disable-autofill"))return!1;if(!this.getValue(e))return!1}return!e.hasAttribute("data-echo-disable")&&(!!e.hasAttribute("data-echo-target")&&(null!==document.getElementById(e.getAttribute("data-echo-target"))&&(!e.hasAttribute("data-echo-wrapper-template")||null!==document.getElementById(e.getAttribute("data-echo-wrapper-template")))))}}